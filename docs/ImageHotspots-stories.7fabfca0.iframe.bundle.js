(self.webpackChunkreact_image_hotspots=self.webpackChunkreact_image_hotspots||[]).push([[118],{"./node_modules/prop-types/factoryWithThrowingShims.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ReactPropTypesSecret=__webpack_require__("./node_modules/prop-types/lib/ReactPropTypesSecret.js");function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},"./node_modules/prop-types/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":module=>{"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./src/ImageHotspots.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomBackground:()=>CustomBackground,Default:()=>Default,LandscapeInLandscape:()=>LandscapeInLandscape,LandscapeInPortrait:()=>LandscapeInPortrait,PortraitInLandscape:()=>PortraitInLandscape,PortraitInPortrait:()=>PortraitInPortrait,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ImageHotspots_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);class Hotspot extends react.Component{render(){const{x,y,content,style={fontFamily:"Sans-Serif",background:"white",boxShadow:"0px 0px 2px 0px rgba(0,0,0,0.5)",pointerEvents:"auto"}}=this.props,hotspotStyle=Object.assign({position:"absolute",display:"block",top:y+"%",left:x+"%"},style);return react.createElement("div",{style:hotspotStyle},content)}}Hotspot.propTypes={x:prop_types_default().number,y:prop_types_default().number,content:prop_types_default().element,style:prop_types_default().object};const src_Hotspot=Hotspot;function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Hotspot.__docgenInfo={description:"",methods:[],displayName:"Hotspot",props:{x:{description:"percentage from the left of the image to show this hotspot",type:{name:"number"},required:!1},y:{description:"percentage from the top of the image to show this hotspot",type:{name:"number"},required:!1},content:{description:"the content of the hotspot",type:{name:"element"},required:!1},style:{description:"the style of the hotspot",type:{name:"object"},required:!1}}};class ImageHotspots extends react.Component{constructor(props){super(props),_defineProperty(this,"componentDidMount",(()=>{const{hideFullscreenControl,hideZoomControls,hideMinimap,hotspots,background}=this.props,{offsetWidth:width,offsetHeight:height}=this.container.current,orientation=width>height?"landscape":"portrait",ratio="landscape"===orientation?width/height:height/width;this.setState({container:{width,height,ratio,orientation,background},hideFullscreenControl,hideZoomControls,hideMinimap,hotspots}),window.addEventListener("resize",this.onWindowResize)})),_defineProperty(this,"componentWillUnmount",(()=>{window.removeEventListener("resize",this.onWindowResize)})),_defineProperty(this,"startDrag",((event,element)=>{const cursorX=event.clientX,cursorY=event.clientY;"image"===element&&this.setState((state=>_objectSpread(_objectSpread({},state),{},{cursorX,cursorY,dragging:!0}))),event.preventDefault()})),_defineProperty(this,"whileDrag",(event=>{const{image,minimap}=this.state,cursorX=event.clientX,cursorY=event.clientY,deltaX=cursorX-this.state.cursorX,deltaY=cursorY-this.state.cursorY,newOffsetX=image.offsetX+deltaX,newOffsetY=image.offsetY+deltaY;this.setState((state=>_objectSpread(_objectSpread({},state),{},{cursorX,cursorY,image:_objectSpread(_objectSpread({},image),{},{offsetX:newOffsetX,offsetY:newOffsetY}),minimap:_objectSpread(_objectSpread({},minimap),{},{offsetX:-minimap.width/image.width*newOffsetX,offsetY:-minimap.height/image.height*newOffsetY})})))})),_defineProperty(this,"stopDrag",(()=>{const{container,image,minimap}=this.state,deltaX=container.width-image.width-image.offsetX,deltaY=container.height-image.height-image.offsetY,offsetXMax=container.orientation===image.orientation?-Math.abs(image.width-container.width):-Math.abs(container.width-image.width),offsetYMax=container.orientation===image.orientation?-Math.abs(container.height-image.height):-Math.abs(image.height-container.height);this.setState((state=>_objectSpread(_objectSpread({},state),{},{image:_objectSpread(_objectSpread({},state.image),{},{offsetX:image.offsetX>=0?0:deltaX>=0?offsetXMax:image.offsetX,offsetY:image.offsetY>=0?container.height>image.height?container.height/2-image.height/2:0:deltaY>=0?container.height>image.height?container.height/2-image.height/2:offsetYMax:image.offsetY}),minimap:_objectSpread(_objectSpread({},state.minimap),{},{offsetX:image.offsetX>=0||image.width<container.width?0:deltaX>=0?-minimap.height/image.height*offsetXMax:-minimap.height/image.height*image.offsetX,offsetY:image.offsetY>=0||image.height<container.height?0:deltaY>=0?-minimap.height/image.height*offsetYMax:-minimap.height/image.height*image.offsetY}),dragging:!1})))})),_defineProperty(this,"handleOnImageLoad",(_ref=>{let{target:image}=_ref;const{offsetWidth:initialWidth,offsetHeight:initialHeight}=image,{container,minimap,hideZoomControls,hideMinimap}=this.state,orientation=initialWidth>initialHeight?"landscape":"portrait",ratio="landscape"===orientation?initialWidth/initialHeight:initialHeight/initialWidth,width=container.orientation===orientation?"landscape"===orientation?ratio>=container.ratio?container.width:container.height*ratio:ratio>=container.ratio?container.height/ratio:container.width:"landscape"===orientation?container.width:container.height/ratio,height=container.orientation===orientation?"landscape"===orientation?ratio>=container.ratio?container.width/ratio:container.height:ratio>=container.ratio?container.height:container.width*ratio:"landscape"===orientation?container.width/ratio:container.height,resizable=initialWidth>width||initialHeight>height;this.setState((prevState=>_objectSpread(_objectSpread({},prevState),{},{image:_objectSpread(_objectSpread({},prevState.image),{},{initialWidth,initialHeight,width,height,scale:1,ratio,orientation,offsetX:0,offsetY:container.height/2-height/2}),minimap:_objectSpread(_objectSpread({},minimap),{},{width:"landscape"===orientation?minimap.initialSize:minimap.initialSize/ratio,height:"portrait"===orientation?minimap.initialSize:minimap.initialSize/ratio,guideWidth:"landscape"===orientation?minimap.initialSize:minimap.initialSize/ratio,guideHeight:"portrait"===orientation?minimap.initialSize:minimap.initialSize/ratio}),hideZoomControls:hideZoomControls||!resizable,hideMinimap:hideMinimap||!resizable,resizable,draggable:!1})))})),_defineProperty(this,"onWindowResize",(()=>{const{offsetWidth:width,offsetHeight:height}=this.container.current,orientation=width>height?"landscape":"portrait",ratio="landscape"===orientation?width/height:height/width;this.setState({container:{width,height,ratio,orientation}}),this.zoom(this.state.image.scale)})),_defineProperty(this,"toggleFullscreen",(()=>{const{fullscreen}=this.state;fullscreen?(this.exitFullscreen(),this.setState({fullscreen:!1})):(this.requestFullscreen(this.container.current),this.setState({fullscreen:!0}))})),_defineProperty(this,"zoom",(scale=>{if(scale>0){const{container,image,minimap}=this.state,width=container.orientation===image.orientation?"landscape"===image.orientation?image.ratio>=container.ratio?container.width*scale:container.height*image.ratio*scale:image.ratio>=container.ratio?container.height/image.ratio*scale:container.width*scale:"landscape"===image.orientation?container.width*scale:container.height/image.ratio*scale,height=container.orientation===image.orientation?"landscape"===image.orientation?image.ratio>=container.ratio?container.width/image.ratio*scale:container.height*scale:image.ratio>=container.ratio?container.height*scale:container.width*image.ratio*scale:"landscape"===image.orientation?container.width/image.ratio*scale:container.height*scale,guideWidth=container.width>=width?minimap.width:minimap.width/(width/container.width),guideHeight=container.height>=height?minimap.height:minimap.height/(height/container.height),deltaX=Math.round(width-image.width),deltaY=Math.round(height-image.height),guideDeltaX=Math.round(guideWidth-minimap.guideWidth),guideDeltaY=Math.round(guideHeight-minimap.guideHeight),offsetX=image.offsetX-deltaX/2,offsetY=image.offsetY-deltaY/2,guideOffsetX=Math.round(minimap.offsetX-guideDeltaX/2),guideOffsetY=Math.round(minimap.offsetY-guideDeltaY/2),offsetXMax=-Math.abs(Math.round(container.width-width)),offsetYMax=-Math.abs(Math.round(container.height-height)),guideOffsetXMax=Math.round(minimap.width-guideWidth),guideOffsetYMax=Math.round(minimap.height-guideHeight);image.initialWidth>width&&image.initialHeight>height&&this.setState((prevState=>({image:_objectSpread(_objectSpread({},prevState.image),{},{width,height,scale,offsetX:offsetX>=0||container.width>width?0:image.offsetX<=offsetXMax?offsetXMax:offsetX,offsetY:container.height>height?container.height/2-height/2:offsetY>=0?0:image.offsetY<offsetYMax?offsetYMax:offsetY}),minimap:_objectSpread(_objectSpread({},prevState.minimap),{},{guideWidth,guideHeight,offsetX:guideOffsetX<=0?0:minimap.offsetX<guideOffsetXMax?guideOffsetX:guideOffsetXMax,offsetY:guideOffsetY<=0||height<container.height?0:minimap.offsetY<guideOffsetYMax?guideOffsetY:guideOffsetYMax}),draggable:scale>1}))),1===scale&&this.setState((prevState=>({image:_objectSpread(_objectSpread({},prevState.image),{},{offsetX:0,offsetY:container.height/2-height/2}),minimap:_objectSpread(_objectSpread({},prevState.minimap),{},{offsetX:0,offsetY:0})})))}})),_defineProperty(this,"requestFullscreen",(element=>{element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen():element.msRequestFullscreen&&element.msRequestFullscreen()})),_defineProperty(this,"exitFullscreen",(()=>{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()})),_defineProperty(this,"render",(()=>{const{src,alt,hotspots,background}=this.props,{container,image,minimap,fullscreen,dragging,hideFullscreenControl,hideZoomControls,hideMinimap,draggable}=this.state,imageLoaded=image.initialWidth&&image.initialHeight,containerStyle={width:"100%",height:"100%",position:"relative",overflow:"hidden",textAlign:"center",background:background||container.background},imageStyle={position:"relative",left:image.offsetX,top:image.offsetY},hotspotsStyle={position:"absolute",top:image.offsetY,left:image.offsetX,right:image.offsetX>=0?0:"auto",margin:"auto",pointerEvents:"none"},topControlsStyle={position:"absolute",top:10,right:10,pointerEvents:this.state.dragging?"none":"auto"},bottomControlsStyle={position:"absolute",bottom:10,right:10,pointerEvents:this.state.dragging?"none":"auto"},buttonStyle={width:"25px",height:"25px",border:"none",background:"#fff",boxShadow:"0px 0px 2px 0px rgba(0,0,0,0.5)"},minimapStyle={width:minimap.width,height:minimap.height,position:"absolute",display:"block",bottom:10,left:10,background:"#fff",boxShadow:"0px 0px 2px 0px rgba(0,0,0,0.5)",pointerEvents:"none"},guideStyle={width:minimap.guideWidth,height:minimap.guideHeight,position:"absolute",display:"block",left:minimap.offsetX,top:minimap.offsetY,border:"1px solid rgba(64, 139, 252, 0.8)",background:"rgba(64, 139, 252, 0.1)",pointerEvents:"none"};return imageLoaded&&("landscape"===container.orientation?imageStyle.height=image.height:imageStyle.width=image.width,"landscape"===image.orientation?(hotspotsStyle.width=image.width,hotspotsStyle.height=image.width/image.ratio):(hotspotsStyle.width=image.height/image.ratio,hotspotsStyle.height=image.height)),react.createElement("div",{ref:this.container,style:containerStyle,onMouseOut:event=>{dragging&&this.stopDrag(event)},onBlur:event=>{dragging&&this.stopDrag(event)}},src&&react.createElement("img",{src,alt,onLoad:this.handleOnImageLoad,style:imageStyle,onMouseDown:event=>{!hideZoomControls&&draggable&&this.startDrag(event,"image")},onMouseMove:event=>{!hideZoomControls&&dragging&&this.whileDrag(event)},onMouseUp:event=>{dragging&&this.stopDrag(event)}}),hotspots&&react.createElement("div",{style:hotspotsStyle},hotspots.map(((hotspot,i)=>react.createElement(src_Hotspot,_extends({key:i},hotspot))))),!hideFullscreenControl&&react.createElement("div",{style:topControlsStyle},react.createElement("button",{style:buttonStyle,onClick:()=>this.toggleFullscreen()},fullscreen?"X":"FS")),!hideZoomControls&&react.createElement(react.Fragment,null,react.createElement("div",{style:bottomControlsStyle},draggable&&react.createElement(react.Fragment,null,react.createElement("button",{style:buttonStyle,onClick:()=>this.zoom(1)},"Fit"),react.createElement("br",null),react.createElement("br",null)),react.createElement("button",{style:buttonStyle,onClick:()=>this.zoom(image.scale+1)},"+"),react.createElement("br",null),react.createElement("button",{style:buttonStyle,onClick:()=>this.zoom(image.scale-1)},"-")),!hideMinimap&&react.createElement("div",{style:minimapStyle},src&&react.createElement("img",{src,width:minimapStyle.width,height:minimapStyle.height}),react.createElement("div",{style:guideStyle}))))})),this.state={container:{width:void 0,height:void 0,ratio:void 0,orientation:void 0,background:void 0},image:{initialWidth:void 0,initialHeight:void 0,width:void 0,height:void 0,scale:void 0,ratio:void 0,orientation:void 0,offsetX:void 0,offsetY:void 0},minimap:{initialSize:100,width:void 0,height:void 0,guideWidth:void 0,guideHeight:void 0,offsetX:0,offsetY:0},hideFullscreenControl:!1,hideZoomControls:!1,hideMinimap:!1,resizable:void 0,draggable:void 0,cursorX:void 0,cursorY:void 0,mcursorX:void 0,mcursorY:void 0,dragging:void 0,isGuideDragging:void 0,hotspots:[]},this.container=react.createRef()}}ImageHotspots.propTypes={src:prop_types_default().string,alt:prop_types_default().string,hotspots:prop_types_default().array};const src_ImageHotspots=ImageHotspots;ImageHotspots.__docgenInfo={description:"",methods:[{name:"componentDidMount",docblock:null,modifiers:[],params:[],returns:null},{name:"componentWillUnmount",docblock:null,modifiers:[],params:[],returns:null},{name:"startDrag",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null},{name:"element",optional:!1,type:null}],returns:null},{name:"whileDrag",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"stopDrag",docblock:null,modifiers:[],params:[],returns:null},{name:"handleOnImageLoad",docblock:null,modifiers:[],params:[{name:"{ target: image }",optional:!1,type:null}],returns:null},{name:"onWindowResize",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleFullscreen",docblock:null,modifiers:[],params:[],returns:null},{name:"zoom",docblock:null,modifiers:[],params:[{name:"scale",optional:!1,type:null}],returns:null},{name:"requestFullscreen",docblock:null,modifiers:[],params:[{name:"element",optional:!1,type:null}],returns:null},{name:"exitFullscreen",docblock:null,modifiers:[],params:[],returns:null},{name:"render",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ImageHotspots",props:{src:{description:"",type:{name:"string"},required:!1},alt:{description:"",type:{name:"string"},required:!1},hotspots:{description:"",type:{name:"array"},required:!1}}};const landscape_namespaceObject=__webpack_require__.p+"static/media/landscape.0dc3cf23.jpg",portrait_namespaceObject=__webpack_require__.p+"static/media/portrait.e252521a.jpg",hotspots=[{x:10,y:20,content:react.createElement("span",{style:{padding:10}},"Hotspot1")},{x:50,y:10,content:react.createElement("span",{style:{padding:10}},"Hotspot2")},{x:30,y:40,content:react.createElement("span",{style:{padding:10}},"Hotspot3")},{x:50,y:60,content:react.createElement("span",{style:{padding:10}},"Hotspot4")}],ImageHotspots_stories={title:"Image Hostpots",component:src_ImageHotspots},Default=args=>react.createElement("div",{style:{width:"100%",height:"90vh"}},react.createElement(src_ImageHotspots,args));Default.args={src:landscape_namespaceObject,alt:"Sample image",hideFullscreenControl:!1,hideZoomControls:!1,hotspots,hideMinimap:!1};const LandscapeInLandscape=args=>react.createElement("div",{style:{width:"450px",height:"300px"}},react.createElement(src_ImageHotspots,args));LandscapeInLandscape.args={src:landscape_namespaceObject,alt:"Sample image",hideFullscreenControl:!1,hideZoomControls:!1,hotspots,hideMinimap:!1};const LandscapeInPortrait=args=>react.createElement("div",{style:{width:"250px",height:"300px"}},react.createElement(src_ImageHotspots,args));LandscapeInPortrait.args={src:landscape_namespaceObject,alt:"Sample image",hideFullscreenControl:!1,hideZoomControls:!1,hotspots,hideMinimap:!1};const PortraitInPortrait=args=>react.createElement("div",{style:{width:"250px",height:"300px"}},react.createElement(src_ImageHotspots,args));PortraitInPortrait.args={src:portrait_namespaceObject,alt:"Sample image",hideFullscreenControl:!1,hideZoomControls:!1,hotspots,hideMinimap:!1};const PortraitInLandscape=args=>react.createElement("div",{style:{width:"450px",height:"300px"}},react.createElement(src_ImageHotspots,args));PortraitInLandscape.args={src:portrait_namespaceObject,alt:"Sample image",hideFullscreenControl:!1,hideZoomControls:!1,hotspots,hideMinimap:!1};const CustomBackground=args=>react.createElement("div",{style:{width:"450px",height:"300px"}},react.createElement(src_ImageHotspots,args));CustomBackground.args={src:portrait_namespaceObject,alt:"Sample image",background:"lightGray"},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  return <div style={{\n    width: '100%',\n    height: '90vh'\n  }}>\n      <ImageHotspots {...args} />\n    </div>;\n}",...Default.parameters?.docs?.source}}},LandscapeInLandscape.parameters={...LandscapeInLandscape.parameters,docs:{...LandscapeInLandscape.parameters?.docs,source:{originalSource:"args => {\n  return <div style={{\n    width: '450px',\n    height: '300px'\n  }}>\n      <ImageHotspots {...args} />\n    </div>;\n}",...LandscapeInLandscape.parameters?.docs?.source}}},LandscapeInPortrait.parameters={...LandscapeInPortrait.parameters,docs:{...LandscapeInPortrait.parameters?.docs,source:{originalSource:"args => {\n  return <div style={{\n    width: '250px',\n    height: '300px'\n  }}>\n      <ImageHotspots {...args} />\n    </div>;\n}",...LandscapeInPortrait.parameters?.docs?.source}}},PortraitInPortrait.parameters={...PortraitInPortrait.parameters,docs:{...PortraitInPortrait.parameters?.docs,source:{originalSource:"args => {\n  return <div style={{\n    width: '250px',\n    height: '300px'\n  }}>\n      <ImageHotspots {...args} />\n    </div>;\n}",...PortraitInPortrait.parameters?.docs?.source}}},PortraitInLandscape.parameters={...PortraitInLandscape.parameters,docs:{...PortraitInLandscape.parameters?.docs,source:{originalSource:"args => {\n  return <div style={{\n    width: '450px',\n    height: '300px'\n  }}>\n      <ImageHotspots {...args} />\n    </div>;\n}",...PortraitInLandscape.parameters?.docs?.source}}},CustomBackground.parameters={...CustomBackground.parameters,docs:{...CustomBackground.parameters?.docs,source:{originalSource:"args => {\n  return <div style={{\n    width: '450px',\n    height: '300px'\n  }}>\n      <ImageHotspots {...args} />\n    </div>;\n}",...CustomBackground.parameters?.docs?.source}}};const __namedExportsOrder=["Default","LandscapeInLandscape","LandscapeInPortrait","PortraitInPortrait","PortraitInLandscape","CustomBackground"]}}]);